# Тест Серверных Изменений

## Как проверить, что изменения применились:

### 1. ПЕРЕЗАПУСК СЕРВЕРА (ОБЯЗАТЕЛЬНО!)

В PowerShell где запущен сервер:

1. **Остановить**: `Ctrl+C`
2. **Запустить заново**:
   ```powershell
   uvicorn server:app --reload
   ```

### 2. Проверить изменения в браузере:

#### Тест #1: SB Complete (10$, не 20$)
**Шаги:**
1. Зайди двумя игроками за стол
2. Посмотри блайнды: SB поставил 10$, BB поставил 20$
3. BB нажимает CHECK (не Call!)
4. **Проверка:** SB должен видеть кнопку "Call $10" (не $20!)
5. SB нажимает Call
6. **Ожидаемый результат:** 
   - У SB вычтется 10$ (не 20!)
   - Pot станет 30$ (10+10+10=30)

#### Тест #2: Кнопка RAISE появляется
**Шаги:**
1. После блайндов, BB нажимает BET (например, 50$)
2. **Проверка:** SB должен видеть кнопку "Raise $100" (не просто "Bet")

#### Тест #3: Индикатор стадии
**Проверка:** Надпись "PRE-FLOP" должна быть в **ЛЕВОМ НИЖНЕМ** углу стола (не в правом верхнем)

---

## Если изменения НЕ видны:

### Возможная причина: Кэш браузера
1. Открой DevTools (F12)
2. Правой кнопкой на кнопке обновления → "Очистить кэш и жёсткое обновление"
3. Или нажми `Ctrl+Shift+R`

### Возможная причина: Старый код сервера
Проверь в файле `server.py` строку 873:
```python
# DON'T add to pot yet - chips stay in front of player (player_bets)
```
Если этого комментария нет — изменения не применились.

---

## Ожидаемая математика фишек:

### Пример игры 2 игрока:
| Игрок | Стек до | Действие | Стек после | player_bets | pot |
|-------|---------|----------|------------|-------------|-----|
| SB    | 1000    | Post SB  | 990        | SB: 10      | 0   |
| BB    | 1000    | Post BB  | 980        | SB:10, BB:20| 0   |
| BB    | 980     | CHECK    | 980        | SB:10, BB:20| 0   |
| SB    | 990     | CALL 10  | 980        | SB:20, BB:20| 0   |
| → Флоп |  —     | —        | —          | (clear)     | 40  |

**Ключевые моменты:**
- ✅ SB доставляет **10$**, не 20$
- ✅ BB может CHECK (не forced Call)
- ✅ Pot собирается только при переходе на Флоп
