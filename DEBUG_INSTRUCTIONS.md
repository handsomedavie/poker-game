# üêõ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –û—Ç–ª–∞–¥–∫–µ –ö–Ω–æ–ø–æ–∫ Call/Check

## ‚úÖ –ß—Ç–æ –Ø –°–¥–µ–ª–∞–ª:

### 1. –î–æ–±–∞–≤–∏–ª Debug –õ–æ–≥–∏ –Ω–∞ –ö–ª–∏–µ–Ω—Ç–µ
**–§–∞–π–ª:** `PokerTable.tsx`
- ‚úÖ –õ–æ–≥–∏ –≤ `handleCall()` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ª–∏ —Ñ—É–Ω–∫—Ü–∏—è
- ‚úÖ –õ–æ–≥–∏ –≤ `handleCheck()` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ª–∏ –∫–æ–º–∞–Ω–¥–∞
- ‚úÖ –õ–æ–≥–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è controls - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –≤—Å–µ—Ö —Ñ–ª–∞–≥–æ–≤

**–§–∞–π–ª:** `BettingControls.tsx`
- ‚úÖ –õ–æ–≥–∏ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ª–∏ onClick
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Check vs Call

### 2. –î–æ–±–∞–≤–∏–ª Debug –õ–æ–≥–∏ –Ω–∞ –°–µ—Ä–≤–µ—Ä–µ
**–§–∞–π–ª:** `server.py`
- ‚úÖ –õ–æ–≥–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –ø—Ä–∏—à–ª–∞ –ª–∏ –∫–æ–º–∞–Ω–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- ‚úÖ –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫ - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –ø–æ—á–µ–º—É –∫–æ–º–∞–Ω–¥–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞
- ‚úÖ –õ–æ–≥–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ª–∏ –∫–æ–º–∞–Ω–¥–∞

---

## üöÄ –ß—Ç–æ –ù—É–∂–Ω–æ –°–¥–µ–ª–∞—Ç—å:

### –®–∞–≥ 1: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ë—ç–∫–µ–Ω–¥–∞ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)

–í PowerShell –≥–¥–µ –∑–∞–ø—É—â–µ–Ω —Å–µ—Ä–≤–µ—Ä:

```powershell
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏ —Å–µ—Ä–≤–µ—Ä
–ù–∞–∂–º–∏: Ctrl+C

# 2. –ó–∞–ø—É—Å—Ç–∏ —Å–Ω–æ–≤–∞
uvicorn server:app --reload
```

**–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:**
```
INFO:     Uvicorn running on http://127.0.0.1:8000
INFO:     Started reloader process
```

---

### –®–∞–≥ 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –§—Ä–æ–Ω—Ç–µ–Ω–¥–∞

–í –±—Ä–∞—É–∑–µ—Ä–µ:
```
Ctrl+Shift+R (–∂—ë—Å—Ç–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
```

–ò–ª–∏:
```
F12 ‚Üí –≤–∫–ª–∞–¥–∫–∞ Console ‚Üí –Ω–∞–∂–º–∏ Clear Console ‚Üí –æ–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É
```

---

### –®–∞–≥ 3: –û—Ç–∫—Ä–æ–π –û–ë–ê –û–∫–Ω–∞ –õ–æ–≥–æ–≤

#### 3.1. –õ–æ–≥–∏ –ö–ª–∏–µ–Ω—Ç–∞ (–ë—Ä–∞—É–∑–µ—Ä)
- –ù–∞–∂–º–∏ `F12`
- –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Console**
- –û—Å—Ç–∞–≤—å —ç—Ç–æ –æ–∫–Ω–æ –æ—Ç–∫—Ä—ã—Ç—ã–º

#### 3.2. –õ–æ–≥–∏ –°–µ—Ä–≤–µ—Ä–∞ (PowerShell)
- –û–∫–Ω–æ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω `uvicorn server:app --reload`
- –û—Å—Ç–∞–≤—å —ç—Ç–æ –æ–∫–Ω–æ –≤–∏–¥–∏–º—ã–º

---

### –®–∞–≥ 4: –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–∏ –ü—Ä–æ–±–ª–µ–º—É

1. –ó–∞–π–¥–∏ –¥–≤—É–º—è –∏–≥—Ä–æ–∫–∞–º–∏ –∑–∞ —Å—Ç–æ–ª
2. –ü–æ–¥–æ–∂–¥–∏, –ø–æ–∫–∞ —Å—Ç–∞–Ω–µ—Ç —Ç–≤–æ–π —Ö–æ–¥
3. –ù–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É **Call** –∏–ª–∏ **Check**

---

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å –õ–æ–≥–∏

## üìä –í –ö–æ–Ω—Å–æ–ª–∏ –ë—Ä–∞—É–∑–µ—Ä–∞ –î–æ–ª–∂–Ω–æ –ë—ã—Ç—å:

### –ù–æ—Ä–º–∞–ª—å–Ω—ã–π –°—Ü–µ–Ω–∞—Ä–∏–π (–ö–Ω–æ–ø–∫–∞ –†–∞–±–æ—Ç–∞–µ—Ç):
```
[DEBUG] Controls State: {
  isRemoteControlled: true,
  heroIsActiveOnServer: true,  ‚Üê –í–ê–ñ–ù–û: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å true
  controlsAreActive: true,       ‚Üê –í–ê–ñ–ù–û: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å true
  callAmount: 10,
  canCheck: false
}
[DEBUG] Call/Check button clicked, callAmount: 10, canCheck: false, isActive: true
[DEBUG] Calling onCall
[DEBUG] handleCall called, callAmount: 10, isRemoteControlled: true
[DEBUG] Sending action: call
```

### –ü—Ä–æ–±–ª–µ–º–Ω—ã–π –°—Ü–µ–Ω–∞—Ä–∏–π #1 (–ö–Ω–æ–ø–∫–∞ Disabled):
```
[DEBUG] Controls State: {
  ...
  heroIsActiveOnServer: false,   ‚Üê –ü–†–û–ë–õ–ï–ú–ê: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å true!
  controlsAreActive: false,       ‚Üê –ü–†–û–ë–õ–ï–ú–ê: –∫–Ω–æ–ø–∫–∞ disabled!
}
```
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ —Ç–≤–æ–π —Ö–æ–¥, –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–π –∏–≥—Ä–æ–∫

### –ü—Ä–æ–±–ª–µ–º–Ω—ã–π –°—Ü–µ–Ω–∞—Ä–∏–π #2 (–ö–ª–∏–∫ –ù–µ –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç):
```
[DEBUG] Controls State: { ... controlsAreActive: true ... }
‚Üê –ù–û –ù–ï–¢ "Call/Check button clicked"
```
**–ü—Ä–∏—á–∏–Ω–∞:** onClick –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞ —Å React

### –ü—Ä–æ–±–ª–µ–º–Ω—ã–π –°—Ü–µ–Ω–∞—Ä–∏–π #3 (–ö–æ–º–∞–Ω–¥–∞ –ù–µ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è):
```
[DEBUG] handleCall called...
‚Üê –ù–û –ù–ï–¢ "Sending action: call"
```
**–ü—Ä–∏—á–∏–Ω–∞:** WebSocket –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∏–ª–∏ isRemoteControlled = false

---

## üìä –í –ö–æ–Ω—Å–æ–ª–∏ –°–µ—Ä–≤–µ—Ä–∞ (PowerShell) –î–æ–ª–∂–Ω–æ –ë—ã—Ç—å:

### –ù–æ—Ä–º–∞–ª—å–Ω—ã–π –°—Ü–µ–Ω–∞—Ä–∏–π:
```
[DEBUG] handle_action: user=Guest_123, command=call, player=True, folded=False, stage=preflop
[DEBUG] active_user_id=Guest_123, is_player_turn=True
[DEBUG] Processing command: call
```

### –ü—Ä–æ–±–ª–µ–º–Ω—ã–π –°—Ü–µ–Ω–∞—Ä–∏–π #1 (–ù–µ –¢–≤–æ–π –•–æ–¥):
```
[DEBUG] handle_action: user=Guest_123, command=call...
[DEBUG] active_user_id=Guest_456, is_player_turn=False  ‚Üê –ü–†–û–ë–õ–ï–ú–ê!
[DEBUG] Rejected: not player's turn
```
**–ü—Ä–∏—á–∏–Ω–∞:** active_user_id —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –¥—Ä—É–≥–æ–≥–æ –∏–≥—Ä–æ–∫–∞

### –ü—Ä–æ–±–ª–µ–º–Ω—ã–π –°—Ü–µ–Ω–∞—Ä–∏–π #2 (–ò–≥—Ä–æ–∫ –°—Ñ–æ–ª–¥–∏–ª):
```
[DEBUG] handle_action: user=Guest_123, command=call, player=True, folded=True ‚Üê –ü–†–û–ë–õ–ï–ú–ê!
[DEBUG] Rejected: player check failed
```
**–ü—Ä–∏—á–∏–Ω–∞:** –°–µ—Ä–≤–µ—Ä —Å—á–∏—Ç–∞–µ—Ç, —á—Ç–æ –∏–≥—Ä–æ–∫ —É–∂–µ —Å—Ñ–æ–ª–¥–∏–ª—Å—è

---

## üîß –í–æ–∑–º–æ–∂–Ω—ã–µ –†–µ—à–µ–Ω–∏—è:

### –ï—Å–ª–∏ `heroIsActiveOnServer = false`:
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–ª–∏–µ–Ω—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞

**–ü—Ä–æ–≤–µ—Ä—å:**
1. `heroSeat?.player?.id` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `currentUserId`?
2. `tableState?.activeUserId` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `currentUserId`?

**–õ–æ–≥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```
heroSeat: "Guest_123"
activeUserId: "Guest_456"  ‚Üê –ù–ï –°–û–í–ü–ê–î–ê–Æ–¢!
```

### –ï—Å–ª–∏ `is_player_turn=False` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
**–ü—Ä–æ–±–ª–µ–º–∞:** –°–µ—Ä–≤–µ—Ä –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. BB Option –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª - BB –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Ö–æ–¥, –Ω–æ `active_user_id` –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∏–ª—Å—è
2. –†–æ—Ç–∞—Ü–∏—è –∏–≥—Ä–æ–∫–æ–≤ —Å–ª–æ–º–∞–ª–∞—Å—å –ø–æ—Å–ª–µ call/check

---

## üìã –°–ª–µ–¥—É—é—â–∏–µ –®–∞–≥–∏:

–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥–æ–≤:

1. **–°–∫–æ–ø–∏—Ä—É–π –í–°–ï –ª–æ–≥–∏** –∏–∑ –æ–±–µ–∏—Ö –∫–æ–Ω—Å–æ–ª–µ–π (–±—Ä–∞—É–∑–µ—Ä + PowerShell)
2. **–ü—Ä–∏—à–ª–∏ –º–Ω–µ** - —Ç–æ–≥–¥–∞ —è —Å–º–æ–≥—É —Ç–æ—á–Ω–æ —Å–∫–∞–∑–∞—Ç—å, –≤ —á—ë–º –ø—Ä–æ–±–ª–µ–º–∞
3. **–ò–ª–∏ –æ–ø–∏—à–∏ —Å–∏–º–ø—Ç–æ–º—ã:**
   - –ö–Ω–æ–ø–∫–∞ —Å–µ—Ä–∞—è (disabled)?
   - –ö–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞, –Ω–æ –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∫–ª–∏–∫–∏?
   - –ö–Ω–æ–ø–∫–∞ –∫–ª–∏–∫–∞–µ—Ç—Å—è, –Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?

---

## üéØ –ë—ã—Å—Ç—Ä–∞—è –ü—Ä–æ–≤–µ—Ä–∫–∞:

–ï—Å–ª–∏ –Ω–µ —Ö–æ—á–µ—à—å —á–∏—Ç–∞—Ç—å –ª–æ–≥–∏, –ø—Ä–æ–≤–µ—Ä—å:

1. **–≠—Ç–æ —Ç–≤–æ–π —Ö–æ–¥?** (—É —Ç–µ–±—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–∞–π–º–µ—Ä)
2. **–ö–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞?** (–Ω–µ —Å–µ—Ä–∞—è)
3. **WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω?** (–Ω–µ—Ç –æ—à–∏–±–æ–∫ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤–≤–µ—Ä—Ö—É)

–ï—Å–ª–∏ –≤—Å—ë –û–ö, –Ω–æ –∫–Ω–æ–ø–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –ø—Ä–∏—à–ª–∏ –ª–æ–≥–∏!
